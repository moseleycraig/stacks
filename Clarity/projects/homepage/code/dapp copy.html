<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guardian Gateway - Bitcoin Oracle Protocol</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Red Hat Display', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: white;
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: #00aaff;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .nav-links a:hover, .nav-links a.active {
            opacity: 1;
            color: #00aaff;
        }

        .wallet-connect {
            background: linear-gradient(45deg, #00aaff, #0077cc);
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
        }

        .wallet-connect:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 170, 255, 0.3);
        }

        .wallet-connect.connected {
            background: linear-gradient(45deg, #28a745, #20c997);
        }

        /* Main Container */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            min-height: calc(100vh - 100px);
        }

        /* Left Panel - Oracle Dashboard */
        .oracle-dashboard {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            height: fit-content;
        }

        .dashboard-header {
            margin-bottom: 2rem;
        }

        .dashboard-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(45deg, #00aaff, #ffffff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .dashboard-subtitle {
            opacity: 0.7;
            font-size: 0.9rem;
        }

        /* Price Feeds Grid */
        .price-feeds-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .price-feed-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .price-feed-card:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
        }

        .asset-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .asset-name {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            background: #28a745;
            border-radius: 50%;
            animation: pulse-status 2s infinite;
        }

        @keyframes pulse-status {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .price-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #00aaff;
            margin-bottom: 0.5rem;
        }

        .confidence-score {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .confidence-bar {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            margin-top: 0.5rem;
            overflow: hidden;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ffd93d, #6bcf7f);
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        /* Network Status */
        .network-status {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            text-align: center;
        }

        .status-item {
            padding: 0.5rem;
        }

        .status-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #00aaff;
        }

        .status-label {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-top: 0.25rem;
        }

        /* Right Panel - Oracle Operations */
        .oracle-operations {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .operation-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
        }

        .operation-header {
            margin-bottom: 1.5rem;
        }

        .operation-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .operation-description {
            opacity: 0.7;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        /* Tabs */
        .tabs {
            display: flex;
            margin-bottom: 2rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 0.25rem;
        }

        .tab {
            flex: 1;
            padding: 0.75rem;
            text-align: center;
            background: none;
            border: none;
            color: white;
            font-family: 'Montserrat', sans-serif;
            font-weight: 500;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            opacity: 0.6;
        }

        .tab.active {
            background: linear-gradient(45deg, #00aaff, #0077cc);
            opacity: 1;
        }

        .tab:hover {
            opacity: 0.8;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            opacity: 0.9;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            font-family: 'Montserrat', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #00aaff;
            box-shadow: 0 0 0 3px rgba(0, 170, 255, 0.1);
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .form-select option {
            background: #1a1a2e;
            color: white;
        }

        /* Buttons */
        .btn-primary {
            width: 100%;
            padding: 1rem 2rem;
            background: linear-gradient(45deg, #00aaff, #0077cc);
            border: none;
            border-radius: 12px;
            color: white;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 170, 255, 0.3);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.1);
        }

        /* Oracle Submission Form */
        .submission-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .form-row-full {
            grid-column: 1 / -1;
        }

        /* Transaction History */
        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
        }

        .transaction-item:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .transaction-details {
            flex: 1;
        }

        .transaction-type {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .transaction-time {
            font-size: 0.8rem;
            opacity: 0.6;
        }

        .transaction-status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-confirmed {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
            border: 1px solid rgba(40, 167, 69, 0.3);
        }

        .status-pending {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
            border: 1px solid rgba(255, 193, 7, 0.3);
        }

        /* Validation Layers Visualization */
        .validation-layers {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .validation-layer {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
        }

        .validation-layer.passed {
            background: rgba(40, 167, 69, 0.2);
            border-color: #28a745;
            color: #28a745;
        }

        .validation-layer.processing {
            background: rgba(255, 193, 7, 0.2);
            border-color: #ffc107;
            color: #ffc107;
            animation: pulse-validation 1s infinite;
        }

        @keyframes pulse-validation {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        /* Oracle Operator Registration */
        .bond-requirements {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .bond-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .bond-item:last-child {
            margin-bottom: 0;
        }

        .bond-label {
            font-weight: 500;
        }

        .bond-amount {
            font-weight: 700;
            color: #00aaff;
        }

        /* DeFi Integration Panel */
        .integration-grid {
            display: grid;
            gap: 1rem;
        }

        .integration-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .integration-card:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
        }

        .integration-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .integration-name {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .integration-status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
            border: 1px solid rgba(40, 167, 69, 0.3);
        }

        .integration-metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }

        .metric {
            text-align: center;
        }

        .metric-value {
            font-size: 1.2rem;
            font-weight: 700;
            color: #00aaff;
        }

        .metric-label {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-top: 0.25rem;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
        }

        @media (max-width: 768px) {
            .nav-container {
                padding: 0 1rem;
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                gap: 1rem;
            }

            .main-container {
                padding: 1rem;
            }

            .price-feeds-grid {
                grid-template-columns: 1fr;
            }

            .submission-form {
                grid-template-columns: 1fr;
            }

            .status-grid {
                grid-template-columns: 1fr;
            }

            .validation-layers {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .nav-links {
                display: none;
            }

            .dashboard-title {
                font-size: 1.5rem;
            }

            .operation-title {
                font-size: 1.3rem;
            }
        }

        /* Loading States */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #00aaff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Success/Error Messages */
        .message {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .message.success {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
            border: 1px solid rgba(40, 167, 69, 0.3);
        }

        .message.error {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
            border: 1px solid rgba(220, 53, 69, 0.3);
        }

        .message.warning {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
            border: 1px solid rgba(255, 193, 7, 0.3);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav-container">
            <a href="#" class="logo">Guardian Gateway</a>
            <div class="nav-links">
                <a href="#dashboard" class="active">Dashboard</a>
                <a href="#oracle">Oracle Operators</a>
                <a href="#integrations">Integrations</a>
                <a href="#governance">Governance</a>
            </div>
            <button class="wallet-connect" id="walletConnect">
                Connect Wallet
            </button>
        </nav>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Panel - Oracle Dashboard -->
        <div class="oracle-dashboard">
            <div class="dashboard-header">
                <h1 class="dashboard-title">Oracle Dashboard</h1>
                <p class="dashboard-subtitle">Real-time Bitcoin-anchored price feeds with 8-layer validation</p>
            </div>

            <!-- Price Feeds Grid -->
            <div class="price-feeds-grid">
                <div class="price-feed-card">
                    <div class="asset-header">
                        <span class="asset-name">Bitcoin (BTC)</span>
                        <div class="status-indicator"></div>
                    </div>
                    <div class="price-value" id="btc-price">$50,000.00</div>
                    <div class="confidence-score">Confidence: <span id="btc-confidence">95%</span></div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: 95%"></div>
                    </div>
                </div>

                <div class="price-feed-card">
                    <div class="asset-header">
                        <span class="asset-name">Ethereum (ETH)</span>
                        <div class="status-indicator"></div>
                    </div>
                    <div class="price-value" id="eth-price">$3,000.00</div>
                    <div class="confidence-score">Confidence: <span id="eth-confidence">93%</span></div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: 93%"></div>
                    </div>
                </div>

                <div class="price-feed-card">
                    <div class="asset-header">
                        <span class="asset-name">USDC</span>
                        <div class="status-indicator"></div>
                    </div>
                    <div class="price-value" id="usdc-price">$1.00</div>
                    <div class="confidence-score">Confidence: <span id="usdc-confidence">99%</span></div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: 99%"></div>
                    </div>
                </div>

                <div class="price-feed-card">
                    <div class="asset-header">
                        <span class="asset-name">STAX</span>
                        <div class="status-indicator"></div>
                    </div>
                    <div class="price-value" id="stax-price">$1.50</div>
                    <div class="confidence-score">Confidence: <span id="stax-confidence">90%</span></div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: 90%"></div>
                    </div>
                </div>
            </div>

            <!-- Network Status -->
            <div class="network-status">
                <h3 style="margin-bottom: 1rem; font-weight: 600;">Network Status</h3>
                <div class="status-grid">
                    <div class="status-item">
                        <div class="status-value" id="active-oracles">5</div>
                        <div class="status-label">Active Oracles</div>
                    </div>
                    <div class="status-item">
                        <div class="status-value" id="consensus-rounds">144</div>
                        <div class="status-label">Consensus Rounds</div>
                    </div>
                    <div class="status-item">
                        <div class="status-value" id="btc-confirmations">6</div>
                        <div class="status-label">BTC Confirmations</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel - Oracle Operations -->
        <div class="oracle-operations">
            <!-- Oracle Submission Card -->
            <div class="operation-card">
                <div class="operation-header">
                    <h2 class="operation-title">Oracle Operations</h2>
                    <p class="operation-description">Submit price data, manage oracle operations, and monitor validation status</p>
                </div>

                <!-- Tabs -->
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('submit')">Submit Data</button>
                    <button class="tab" onclick="switchTab('register')">Register Oracle</button>
                    <button class="tab" onclick="switchTab('history')">History</button>
                </div>

                <!-- Submit Data Tab -->
                <div id="submit-tab" class="tab-content">
                    <div class="message warning">
                        <strong>Bootstrap Mode:</strong> Currently operating with reduced requirements for early testing.
                    </div>

                    <div class="submission-form">
                        <div class="form-group">
                            <label class="form-label">Asset</label>
                            <select class="form-select" id="asset-select">
                                <option value="BTC">Bitcoin (BTC)</option>
                                <option value="ETH">Ethereum (ETH)</option>
                                <option value="USDC">USDC</option>
                                <option value="STAX">STAX</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Price (USD)</label>
                            <input type="number" class="form-input" id="price-input" placeholder="50000.00" step="0.01">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Confidence (%)</label>
                            <input type="number" class="form-input" id="confidence-input" placeholder="95" min="0" max="100">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Bitcoin Block Hash</label>
                            <input type="text" class="form-input" id="block-hash-input" placeholder="0x000000000000000...">
                        </div>

                        <div class="form-group form-row-full">
                            <label class="form-label">VAA Payload (Hex)</label>
                            <input type="text" class="form-input" id="vaa-input" placeholder="Enter Wormhole VAA payload...">
                        </div>
                    </div>

                    <!-- 8-Layer Validation Visualization -->
                    <div style="margin: 2rem 0;">
                        <h4 style="margin-bottom: 1rem; font-weight: 600;">8-Layer Validation Progress</h4>
                        <div class="validation-layers">
                            <div class="validation-layer" id="layer-1">1</div>
                            <div class="validation-layer" id="layer-2">2</div>
                            <div class="validation-layer" id="layer-3">3</div>
                            <div class="validation-layer" id="layer-4">4</div>
                            <div class="validation-layer" id="layer-5">5</div>
                            <div class="validation-layer" id="layer-6">6</div>
                            <div class="validation-layer" id="layer-7">7</div>
                            <div class="validation-layer" id="layer-8">8</div>
                        </div>
                        <p style="font-size: 0.8rem; opacity: 0.7; margin-top: 0.5rem;">
                            Layers: VAA Verification → Pyth Integration → Consensus → Bitcoin Validation → Confidence → Time Window → Deviation → BTC Confirmation
                        </p>
                    </div>

                    <button class="btn-primary" id="submit-data-btn" onclick="submitOracleData()">
                        Submit Oracle Data
                    </button>
                </div>

                <!-- Register Oracle Tab -->
                <div id="register-tab" class="tab-content" style="display: none;">
                    <div class="message warning">
                        <strong>Bootstrap Program:</strong> Reduced bond requirements for early oracle operators.
                    </div>

                    <div class="bond-requirements">
                        <h4 style="margin-bottom: 1rem; font-weight: 600;">Bond Requirements</h4>
                        <div class="bond-item">
                            <span class="bond-label">STX Bond (Bootstrap)</span>
                            <span class="bond-amount">1,000 STX</span>
                        </div>
                        <div class="bond-item">
                            <span class="bond-label">BTC Bond (Bootstrap)</span>
                            <span class="bond-amount">0.01 BTC</span>
                        </div>
                        <div class="bond-item">
                            <span class="bond-label">Production STX Bond</span>
                            <span class="bond-amount">10,000 STX</span>
                        </div>
                        <div class="bond-item">
                            <span class="bond-label">Production BTC Bond</span>
                            <span class="bond-amount">0.1 BTC</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Oracle Address</label>
                        <input type="text" class="form-input" id="oracle-address" placeholder="SP1ABC..." readonly>
                    </div>

                    <div class="submission-form">
                        <div class="form-group">
                            <label class="form-label">STX Bond Amount</label>
                            <input type="number" class="form-input" id="stx-bond" placeholder="1000" min="1000">
                        </div>

                        <div class="form-group">
                            <label class="form-label">BTC Bond Amount</label>
                            <input type="number" class="form-input" id="btc-bond" placeholder="0.01" min="0.01" step="0.01">
                        </div>
                    </div>

                    <button class="btn-primary" id="register-oracle-btn" onclick="registerOracle()">
                        Register as Oracle Operator
                    </button>
                </div>

                <!-- Transaction History Tab -->
                <div id="history-tab" class="tab-content" style="display: none;">
                    <div id="transaction-history">
                        <div class="transaction-item">
                            <div class="transaction-details">
                                <div class="transaction-type">Price Submission - BTC</div>
                                <div class="transaction-time">2 minutes ago</div>
                            </div>
                            <div class="transaction-status status-pending">Validating</div>
                        </div>

                        <div class="transaction-item">
                            <div class="transaction-details">
                                <div class="transaction-type">Price Submission - ETH</div>
                                <div class="transaction-time">15 minutes ago</div>
                            </div>
                            <div class="transaction-status status-confirmed">Confirmed</div>
                        </div>

                        <div class="transaction-item">
                            <div class="transaction-details">
                                <div class="transaction-type">Oracle Registration</div>
                                <div class="transaction-time">2 hours ago</div>
                            </div>
                            <div class="transaction-status status-confirmed">Confirmed</div>
                        </div>

                        <div class="transaction-item">
                            <div class="transaction-details">
                                <div class="transaction-type">Price Submission - USDC</div>
                                <div class="transaction-time">3 hours ago</div>
                            </div>
                            <div class="transaction-status status-confirmed">Confirmed</div>
                        </div>

                        <div class="transaction-item">
                            <div class="transaction-details">
                                <div class="transaction-type">Price Submission - STAX</div>
                                <div class="transaction-time">5 hours ago</div>
                            </div>
                            <div class="transaction-status status-confirmed">Confirmed</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DeFi Integrations Card -->
            <div class="operation-card">
                <div class="operation-header">
                    <h2 class="operation-title">DeFi Integrations</h2>
                    <p class="operation-description">Monitor protocol integrations and their usage of Guardian Gateway price feeds</p>
                </div>

                <div class="integration-grid">
                    <div class="integration-card">
                        <div class="integration-header">
                            <span class="integration-name">ALEX Lab</span>
                            <div class="integration-status">Active</div>
                        </div>
                        <p style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 1rem;">
                            AMM trading with Bitcoin-grade price feeds and slippage protection
                        </p>
                        <div class="integration-metrics">
                            <div class="metric">
                                <div class="metric-value">1,247</div>
                                <div class="metric-label">API Calls Today</div>
                            </div>
                            <div class="metric">
                                <div class="metric-value">99.8%</div>
                                <div class="metric-label">Uptime</div>
                            </div>
                        </div>
                    </div>

                    <div class="integration-card">
                        <div class="integration-header">
                            <span class="integration-name">Velar</span>
                            <div class="integration-status">Active</div>
                        </div>
                        <p style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 1rem;">
                            Leverage trading with mathematical security guarantees
                        </p>
                        <div class="integration-metrics">
                            <div class="metric">
                                <div class="metric-value">892</div>
                                <div class="metric-label">API Calls Today</div>
                            </div>
                            <div class="metric">
                                <div class="metric-value">99.9%</div>
                                <div class="metric-label">Uptime</div>
                            </div>
                        </div>
                    </div>

                    <div class="integration-card">
                        <div class="integration-header">
                            <span class="integration-name">Hermetica</span>
                            <div class="integration-status">Active</div>
                        </div>
                        <p style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 1rem;">
                            Synthetic assets with Bitcoin-backed stability
                        </p>
                        <div class="integration-metrics">
                            <div class="metric">
                                <div class="metric-value">2,156</div>
                                <div class="metric-label">API Calls Today</div>
                            </div>
                            <div class="metric">
                                <div class="metric-value">99.7%</div>
                                <div class="metric-label">Uptime</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let walletConnected = false;
        let currentAccount = null;
        let isSubmitting = false;

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            startPriceFeedUpdates();
            populateOracleAddress();
        });

        // Initialize the application
        function initializeApp() {
            console.log('Guardian Gateway DApp initialized');
            
            // Check for existing wallet connection
            checkWalletConnection();
            
            // Set up event listeners
            setupEventListeners();
        }

        // Setup event listeners
        function setupEventListeners() {
            document.getElementById('walletConnect').addEventListener('click', connectWallet);
            document.getElementById('asset-select').addEventListener('change', updatePriceFromFeed);
        }

        // Wallet connection
        async function connectWallet() {
            const button = document.getElementById('walletConnect');
            
            if (walletConnected) {
                // Disconnect wallet
                walletConnected = false;
                currentAccount = null;
                button.textContent = 'Connect Wallet';
                button.classList.remove('connected');
                showMessage('Wallet disconnected', 'warning');
                return;
            }

            try {
                button.innerHTML = '<div class="loading"></div> Connecting...';
                
                // Simulate wallet connection (replace with actual Stacks wallet integration)
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Mock successful connection
                walletConnected = true;
                currentAccount = 'SP1ABC123DEF456GHI789JKL012MNO345PQR678STU';
                
                button.textContent = `${currentAccount.slice(0, 6)}...${currentAccount.slice(-4)}`;
                button.classList.add('connected');
                
                // Update oracle address
                document.getElementById('oracle-address').value = currentAccount;
                
                showMessage('Wallet connected successfully!', 'success');
                
            } catch (error) {
                console.error('Wallet connection failed:', error);
                button.textContent = 'Connect Wallet';
                showMessage('Failed to connect wallet. Please try again.', 'error');
            }
        }

        // Check for existing wallet connection
        function checkWalletConnection() {
            // In a real app, check for existing wallet session
            // For demo purposes, simulate no existing connection
        }

        // Tab switching
        function switchTab(tabName) {
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.style.display = 'none');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
            document.getElementById(`${tabName}-tab`).style.display = 'block';
        }

        // Update price input when asset is selected
        function updatePriceFromFeed() {
            const asset = document.getElementById('asset-select').value;
            const priceInput = document.getElementById('price-input');
            const confidenceInput = document.getElementById('confidence-input');
            
            // Get current price from dashboard
            const priceElement = document.getElementById(`${asset.toLowerCase()}-price`);
            const confidenceElement = document.getElementById(`${asset.toLowerCase()}-confidence`);
            
            if (priceElement && confidenceElement) {
                const price = priceElement.textContent.replace(', '').replace(',', '');
                const confidence = confidenceElement.textContent.replace('%', '');
                
                priceInput.value = price;
                confidenceInput.value = confidence;
            }
        }

        // Submit oracle data
        async function submitOracleData() {
            if (!walletConnected) {
                showMessage('Please connect your wallet first', 'error');
                return;
            }

            if (isSubmitting) return;

            const submitButton = document.getElementById('submit-data-btn');
            const originalText = submitButton.textContent;
            
            try {
                isSubmitting = true;
                submitButton.innerHTML = '<div class="loading"></div> Submitting...';
                submitButton.disabled = true;

                // Get form data
                const formData = {
                    asset: document.getElementById('asset-select').value,
                    price: parseFloat(document.getElementById('price-input').value),
                    confidence: parseInt(document.getElementById('confidence-input').value),
                    blockHash: document.getElementById('block-hash-input').value,
                    vaaPayload: document.getElementById('vaa-input').value
                };

                // Validate form data
                if (!validateSubmissionForm(formData)) {
                    return;
                }

                // Start validation animation
                startValidationAnimation();

                // Simulate the 8-layer validation process
                await simulateValidationLayers();

                // Simulate smart contract interaction
                await simulateContractCall(formData);

                showMessage('Oracle data submitted successfully! Awaiting Bitcoin confirmation.', 'success');
                
                // Add to transaction history
                addTransactionToHistory('Price Submission - ' + formData.asset, 'pending');
                
                // Reset form
                resetSubmissionForm();

            } catch (error) {
                console.error('Submission failed:', error);
                showMessage('Failed to submit oracle data. Please try again.', 'error');
                resetValidationLayers();
            } finally {
                isSubmitting = false;
                submitButton.textContent = originalText;
                submitButton.disabled = false;
            }
        }

        // Validate submission form
        function validateSubmissionForm(data) {
            if (!data.asset) {
                showMessage('Please select an asset', 'error');
                return false;
            }
            
            if (!data.price || data.price <= 0) {
                showMessage('Please enter a valid price', 'error');
                return false;
            }
            
            if (!data.confidence || data.confidence < 90 || data.confidence > 100) {
                showMessage('Confidence must be between 90-100%', 'error');
                return false;
            }
            
            if (!data.blockHash || data.blockHash.length < 32) {
                showMessage('Please enter a valid Bitcoin block hash', 'error');
                return false;
            }
            
            if (!data.vaaPayload) {
                showMessage('Please enter VAA payload', 'error');
                return false;
            }
            
            return true;
        }

        // Start validation animation
        function startValidationAnimation() {
            resetValidationLayers();
            showMessage('Starting 8-layer validation process...', 'warning');
        }

        // Simulate validation layers
        async function simulateValidationLayers() {
            const layers = [
                'VAA Signature Verification',
                'Pyth Oracle Integration', 
                'Multi-Oracle Consensus',
                'Bitcoin Block Validation',
                'Confidence Score Analysis',
                'Time-Window Validation',
                'Price Deviation Limits',
                'Bitcoin Confirmation Wait'
            ];

            for (let i = 1; i <= 8; i++) {
                const layer = document.getElementById(`layer-${i}`);
                layer.classList.add('processing');
                
                // Simulate processing time
                await new Promise(resolve => setTimeout(resolve, 800));
                
                layer.classList.remove('processing');
                layer.classList.add('passed');
                
                // Update message
                showMessage(`Layer ${i} passed: ${layers[i-1]}`, 'success');
            }
        }

        // Reset validation layers
        function resetValidationLayers() {
            for (let i = 1; i <= 8; i++) {
                const layer = document.getElementById(`layer-${i}`);
                layer.classList.remove('processing', 'passed');
            }
        }

        // Simulate smart contract call
        async function simulateContractCall(data) {
            showMessage('Calling submit-oracle-data function...', 'warning');
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            // Simulate transaction hash
            const txHash = 'SP' + Math.random().toString(36).substr(2, 38).toUpperCase();
            showMessage(`Transaction submitted: ${txHash}`, 'success');
        }

        // Register oracle
        async function registerOracle() {
            if (!walletConnected) {
                showMessage('Please connect your wallet first', 'error');
                return;
            }

            const registerButton = document.getElementById('register-oracle-btn');
            const originalText = registerButton.textContent;
            
            try {
                registerButton.innerHTML = '<div class="loading"></div> Registering...';
                registerButton.disabled = true;

                const stxBond = parseFloat(document.getElementById('stx-bond').value);
                const btcBond = parseFloat(document.getElementById('btc-bond').value);

                if (!stxBond || stxBond < 1000) {
                    showMessage('STX bond must be at least 1,000 STX', 'error');
                    return;
                }

                if (!btcBond || btcBond < 0.01) {
                    showMessage('BTC bond must be at least 0.01 BTC', 'error');
                    return;
                }

                // Simulate registration process
                await new Promise(resolve => setTimeout(resolve, 3000));

                showMessage('Oracle registration successful! You can now submit price data.', 'success');
                
                // Add to transaction history
                addTransactionToHistory('Oracle Registration', 'confirmed');

            } catch (error) {
                console.error('Registration failed:', error);
                showMessage('Failed to register oracle. Please try again.', 'error');
            } finally {
                registerButton.textContent = originalText;
                registerButton.disabled = false;
            }
        }

        // Add transaction to history
        function addTransactionToHistory(type, status) {
            const history = document.getElementById('transaction-history');
            const now = new Date();
            const timeString = 'Just now';
            
            const statusClass = status === 'confirmed' ? 'status-confirmed' : 'status-pending';
            const statusText = status === 'confirmed' ? 'Confirmed' : 'Pending';
            
            const transactionHtml = `
                <div class="transaction-item">
                    <div class="transaction-details">
                        <div class="transaction-type">${type}</div>
                        <div class="transaction-time">${timeString}</div>
                    </div>
                    <div class="transaction-status ${statusClass}">${statusText}</div>
                </div>
            `;
            
            history.insertAdjacentHTML('afterbegin', transactionHtml);
        }

        // Reset submission form
        function resetSubmissionForm() {
            document.getElementById('price-input').value = '';
            document.getElementById('confidence-input').value = '';
            document.getElementById('block-hash-input').value = '';
            document.getElementById('vaa-input').value = '';
        }

        // Populate oracle address
        function populateOracleAddress() {
            if (walletConnected && currentAccount) {
                document.getElementById('oracle-address').value = currentAccount;
            }
        }

        // Show message
        function showMessage(text, type) {
            // Remove existing messages
            const existingMessages = document.querySelectorAll('.message');
            existingMessages.forEach(msg => {
                if (!msg.classList.contains('warning') || type !== 'success') {
                    msg.remove();
                }
            });

            // Create new message
            const message = document.createElement('div');
            message.className = `message ${type}`;
            message.textContent = text;

            // Insert at the top of the current tab content
            const activeTab = document.querySelector('.tab-content[style*="block"], .tab-content:not([style])');
            if (activeTab) {
                activeTab.insertBefore(message, activeTab.firstChild);
            }

            // Auto-remove success/error messages after 5 seconds
            if (type === 'success' || type === 'error') {
                setTimeout(() => {
                    if (message.parentNode) {
                        message.remove();
                    }
                }, 5000);
            }
        }

        // Start price feed updates
        function startPriceFeedUpdates() {
            // Update prices every 30 seconds
            setInterval(updatePriceFeeds, 30000);
            
            // Update network stats every 10 seconds
            setInterval(updateNetworkStats, 10000);
        }

        // Update price feeds
        function updatePriceFeeds() {
            const assets = ['btc', 'eth', 'usdc', 'stax'];
            const baseValues = {
                'btc': 50000,
                'eth': 3000,
                'usdc': 1.00,
                'stax': 1.50
            };

            assets.forEach(asset => {
                const priceElement = document.getElementById(`${asset}-price`);
                const confidenceElement = document.getElementById(`${asset}-confidence`);
                const confidenceBar = priceElement.parentElement.querySelector('.confidence-fill');
                
                if (priceElement && asset !== 'usdc') {
                    // Add small random variation
                    const baseValue = baseValues[asset];
                    const variation = (Math.random() - 0.5) * 0.02; // ±1% variation
                    const newValue = baseValue * (1 + variation);
                    
                    if (asset === 'btc') {
                        priceElement.textContent = ' + Math.round(newValue).toLocaleString() + '.00';
                    } else if (asset === 'eth') {
                        priceElement.textContent = ' + Math.round(newValue).toLocaleString() + '.00';
                    } else {
                        priceElement.textContent = ' + newValue.toFixed(2);
                    }
                }
                
                // Update confidence scores
                if (confidenceElement) {
                    const baseConfidence = asset === 'usdc' ? 99 : (asset === 'stax' ? 90 : 95);
                    const confidenceVariation = Math.floor(Math.random() * 3) - 1; // -1, 0, or 1
                    const newConfidence = Math.max(88, Math.min(99, baseConfidence + confidenceVariation));
                    
                    confidenceElement.textContent = newConfidence + '%';
                    if (confidenceBar) {
                        confidenceBar.style.width = newConfidence + '%';
                    }
                }
            });
        }

        // Update network stats
        function updateNetworkStats() {
            const activeOracles = document.getElementById('active-oracles');
            const consensusRounds = document.getElementById('consensus-rounds');
            const btcConfirmations = document.getElementById('btc-confirmations');
            
            if (activeOracles) {
                // Simulate oracle count changes
                const currentCount = parseInt(activeOracles.textContent);
                const variation = Math.random() > 0.9 ? (Math.random() > 0.5 ? 1 : -1) : 0;
                const newCount = Math.max(3, Math.min(10, currentCount + variation));
                activeOracles.textContent = newCount;
            }
            
            if (consensusRounds) {
                // Increment consensus rounds
                const currentRounds = parseInt(consensusRounds.textContent);
                consensusRounds.textContent = currentRounds + 1;
            }
            
            if (btcConfirmations) {
                // Keep confirmations at 6 (or simulate new block)
                const current = parseInt(btcConfirmations.textContent);
                if (Math.random() > 0.95) { // 5% chance of new block
                    btcConfirmations.textContent = '1';
                    setTimeout(() => {
                        let count = 1;
                        const interval = setInterval(() => {
                            count++;
                            btcConfirmations.textContent = count;
                            if (count >= 6) {
                                clearInterval(interval);
                            }
                        }, 30000); // 30 seconds per confirmation
                    }, 1000);
                }
            }
        }

        // Simulate real-time data updates for demo
        setTimeout(() => {
            if (document.getElementById('submit-tab').style.display !== 'none') {
                // Auto-fill some demo data after 3 seconds
                document.getElementById('block-hash-input').value = '0000000000000000000' + Math.random().toString(36).substr(2, 13);
                document.getElementById('vaa-input').value = '0x' + Array(64).fill(0).map(() => Math.floor(Math.random() * 16).toString(16)).join('');
            }
        }, 3000);
    </script>
</body>
</html>